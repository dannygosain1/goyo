//  Pins
//  Arduino 5V out TO BT VCC
//  Arduino GND to BT GND
//  Arduino D9 to BT RX through a voltage divider
//  Arduino D8 BT TX (no need voltage divider)

#include <SoftwareSerial.h>
SoftwareSerial BTserial(8, 9); // RX | TX
 
const long baudRate = 57600; 
const char END_CHAR = 'E';
char c=' ';
boolean NL = true;

int dataLength = 203;
String data[203] = {"17108  0 2 0 0 0", "17124 0 2 0 0 0", "17144 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99",
"17164 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99","17184 0 2 -0.14 0.01  0.99","17204 0 2 -0.14 0.01  0.99"};

int go = 1;


void setup() 
{
    Serial.begin(9600);
//    Serial.print("Sketch:   ");   Serial.println(__FILE__);
//    Serial.print("Uploaded: ");   Serial.println(__DATE__);
//    Serial.println(" ");
// 
    BTserial.begin(baudRate);  
//    Serial.print("BTserial started at "); Serial.println(baudRate);
//    Serial.println(" ");
//    Serial.println(BTserial.read());
}
 
void loop()
{
//  if (go == 1){
//  for (int i=0; i<=dataLength; i++) {
//    Serial.println(data[1]);
//  }
//  go = 2;
//  Serial.println("done");
//  }
    
    if (BTserial.available()){
        Serial.println("reading from bt");
        c = BTserial.read(); 
        if (String(c).equals("d")) {
          for (int i=0; i<=dataLength; i++){
            char charBuf[data[1].length() + 1];
            data[1].toCharArray(charBuf, data[1].length());
            dumpData(charBuf);
          }
        }
    }
}

void dumpData(char *data) {
  Serial.println(data);
  BTserial.write(data);
}

